"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[595],{15595:(k,f,l)=>{l.r(f),l.d(f,{TrendAnalysisModule:()=>T});var p=l(69808),i=l(97737),t=l(5e3),y=l(40520),u=l(92340);let v=(()=>{class n{constructor(a){this.http=a;let e=localStorage.getItem("token");this.httpOptions={headers:new y.WM({Authorization:e})}}fetchSuccessErrorClaims(a,e){return this.http.get(u.N.URL+`/dashboard/trendanalysis/details?startDate=${a}&endDate=${e}`,this.httpOptions)}fetchTrendGraphData(a,e,s){return this.http.get(u.N.URL+`/dashboard/total?startDate=${a}&endDate=${e}&category=${s}`,this.httpOptions)}fetchProviders(a,e){return this.http.get(u.N.URL+`/dashboard/trendanalysis/hospital?startDate=${a}&endDate=${e}`,this.httpOptions)}}return n.\u0275fac=function(a){return new(a||n)(t.\u0275\u0275inject(y.eN))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C=(()=>{class n{constructor(){}remodelArray(a){return console.log(a),a.sort((s,r)=>new Date(Object.keys(s)[0])-new Date(Object.keys(r)[0])).map(s=>Object.values(s)[0])}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=l(93075),b=l(39256),g=l(85446);function D(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"nb-option",15),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const a=o.$implicit;t.\u0275\u0275property("value",a.value),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(a.view)}}let R=(()=>{class n{constructor(a,e){this.trendsService=a,this.theme=e,this.categories=[{view:"All",value:"all"},{view:"Pre Auth Request",value:"preauth_request"},{view:"Pre Auth Response",value:"preauth_response"},{view:"Interim Enhancement Request",value:"interim_enhancement_request"},{view:"Interim Enhancement Response",value:"interim_enhancement_response"},{view:"Final Enhancement Request",value:"final_enhancement_request"},{view:"Final Enhancement Response",value:"final_enhancement_response"},{view:"Query Request",value:"query_request"},{view:"Query Response",value:"query_response"}],this.selectedCategory="all",this.selectedStartDate=new m.NI,this.selectedEndDate=new m.NI,this.lengthOfData=0,this.optionsClaims={},this.totalClaims=0}ngOnInit(){let a=new Date;this.endDate=a.toJSON().split("T")[0];const e=new Date(a);e.setDate(a.getDate()-6),this.startDate=e.toJSON().split("T")[0],this.selectedEndDate.setValue(a.toJSON()),this.fetchData(this.startDate,this.endDate,"all")}fetchData(a,e,s){this.resetGraph(),this.trendsService.fetchTrendGraphData(a,e,s).subscribe(r=>{this.totalClaims=r.totalNoOfClaims,this.dataAll=r,this.key=r.graph[0].claimCount.map(h=>Object.keys(h)).flat().sort(),this.filterDataForTabs(r),this.setOptions()})}setOptions(){this.theme.getJsTheme().subscribe(a=>{const e=a.variables.chartjs;this.optionsTrends={responsive:!0,maintainAspectRatio:!1,legend:{position:"top",labels:{fontColor:e.textColor}},hover:{mode:"index"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"},gridLines:{display:!0,color:e.axisLineColor},ticks:{fontColor:e.textColor}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"},gridLines:{display:!0,color:e.axisLineColor},ticks:{fontColor:e.textColor}}]}}})}filterDataForTabs(a){a.graph.forEach(e=>{switch(this.lengthOfData++,e.category){case"preauth_request":this.dataPreReq=this.SortViaDate(e.claimCount);break;case"preauth_response":this.dataPreRes=this.SortViaDate(e.claimCount);break;case"interim_enhancement_request":this.dataInEnhanceReq=this.SortViaDate(e.claimCount);break;case"interim_enhancement_response":this.dataInEnhanceRes=this.SortViaDate(e.claimCount);break;case"final_enhancement_request":this.dataFinalEnhanceReq=this.SortViaDate(e.claimCount);break;case"final_enhancement_response":this.dataFinalEnhanceRes=this.SortViaDate(e.claimCount);break;case"query_request":this.dataQueryReq=this.SortViaDate(e.claimCount);break;case"query_response":this.dataQueryRes=this.SortViaDate(e.claimCount)}}),this.setTemplates()}SortViaDate(a){return a.sort((s,r)=>new Date(Object.keys(s)[0])-new Date(Object.keys(r)[0])).map(s=>Object.values(s)[0])}setTemplates(){this.theme.getJsTheme().subscribe(a=>{const e=a.variables;this.templateAll={labels:this.key,datasets:[{label:"Pre Auth Request",data:this.dataPreReq,borderColor:e.primary,backgroundColor:e.primary,fill:!1,borderDash:[5,5],pointRadius:8,pointHoverRadius:10},{label:"Pre Auth Response",data:this.dataPreRes,borderColor:e.dangerLight,backgroundColor:e.dangerLight,fill:!1,borderDash:[5,5],pointRadius:8,pointHoverRadius:10},{label:"Interim Enhancement Request",data:this.dataInEnhanceReq,borderColor:e.info,backgroundColor:e.info,fill:!1,pointRadius:8,pointHoverRadius:10},{label:"Interim Enhancement Response",data:this.dataInEnhanceRes,borderColor:e.success,backgroundColor:e.success,fill:!1,pointRadius:8,pointHoverRadius:10},{label:"Final Enhancement Request",data:this.dataFinalEnhanceReq,borderColor:e.danger,backgroundColor:e.danger,fill:!1,pointRadius:8,pointHoverRadius:10},{label:"Final Enhancement Response",data:this.dataFinalEnhanceRes,borderColor:e.warning,backgroundColor:e.warning,fill:!1,pointRadius:8,pointHoverRadius:10},{label:"Query Request",data:this.dataQueryReq,borderColor:e.info,backgroundColor:e.info,borderDash:[5,5],fill:!1,pointRadius:8,pointHoverRadius:10},{label:"Query Response",data:this.dataQueryRes,borderColor:"#598bff",backgroundColor:"#598bff",fill:!1,pointRadius:8,pointHoverRadius:10}]}}),this.setTotalClaimsGraph()}filterCategory(a){this.fetchData(this.startDate,this.endDate,a),this.selectedCategory=a}filterDate(a,e){"start"==e?(this.selectedStartDate.setValue(a),this.startDate=this.offsetTimeZone(a)):(this.selectedEndDate.setValue(a),this.endDate=this.offsetTimeZone(a)),this.selectedStartDate.value&&this.selectedEndDate.value&&this.fetchData(this.offsetTimeZone(this.selectedStartDate.value),this.offsetTimeZone(this.selectedEndDate.value),null!=this.selectedCategory?this.selectedCategory:"all")}offsetTimeZone(a){let e=a.toJSON(),s=new Date(e),r=s.getTimezoneOffset();return e=new Date(s.getTime()-60*r*1e3).toJSON().split("T")[0],e}getTotalClaimsArry(){let a=[];switch(this.selectedCategory){case"all":for(let e=0;e<this.lengthOfData;e++)a.push(this.dataPreReq[e]+this.dataPreRes[e]+this.dataInEnhanceReq[e]+this.dataInEnhanceRes[e]+this.dataFinalEnhanceReq[e]+this.dataFinalEnhanceRes[e]+this.dataQueryReq[e]+this.dataQueryRes[e]);break;case"preauth_request":return this.dataPreReq;case"preauth_response":return this.dataPreRes;case"interim_enhancement_request":return this.dataInEnhanceReq;case"interim_enhancement_response":return this.dataInEnhanceRes;case"final_enhancement_request":return this.dataFinalEnhanceReq;case"final_enhancement_response":return this.dataFinalEnhanceRes;case"query_request":return this.dataQueryReq;case"query_response":return this.dataQueryRes}return a}setTotalClaimsGraph(){this.themeSubscriptionClaims=this.theme.getJsTheme().subscribe(a=>{const s=a.variables.echarts;this.optionsClaims={backgroundColor:s.bg,color:[a.variables.primaryLight],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.key,axisTick:{alignWithLabel:!0},axisLine:{lineStyle:{color:s.axisLineColor}},axisLabel:{textStyle:{color:s.textColor}}}],yAxis:[{type:"value",axisLine:{lineStyle:{color:s.axisLineColor}},splitLine:{lineStyle:{color:s.splitLineColor}},axisLabel:{textStyle:{color:s.textColor}}}],series:[{name:"Score",type:"bar",barWidth:"60%",data:this.getTotalClaimsArry()}]}})}resetGraph(){this.key=[],this.dataAll=null,this.dataPreReq=null,this.dataPreRes=null,this.dataInEnhanceReq=null,this.dataInEnhanceRes=null,this.dataFinalEnhanceReq=null,this.dataFinalEnhanceRes=null,this.dataQueryReq=null,this.dataQueryRes=null,this.templateAll=null,this.optionsClaims=[]}}return n.\u0275fac=function(a){return new(a||n)(t.\u0275\u0275directiveInject(v),t.\u0275\u0275directiveInject(i.WMF))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngx-overall-graph"]],decls:35,vars:14,consts:[[1,"row"],[1,"col-8"],[1,"col-md-4","text-center"],["selected","all",2,"min-width","100%",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8","text-center"],[1,"col-6"],["nbInput","","placeholder","Pick Date",3,"nbDatepicker"],[3,"dateChange"],["selectedStartDate",""],["selectedEndDate",""],["type","line",2,"min-height","400px",3,"data","options"],[1,"col-4"],[1,"header-p"],["echarts","",1,"echart",3,"options"],[3,"value"]],template:function(a,e){if(1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-body")(4,"div",0)(5,"div",2)(6,"nb-select",3),t.\u0275\u0275listener("selectedChange",function(r){return e.filterCategory(r)}),t.\u0275\u0275template(7,D,2,2,"nb-option",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",5)(9,"div",0)(10,"div",6),t.\u0275\u0275element(11,"input",7),t.\u0275\u0275elementStart(12,"nb-datepicker",8,9),t.\u0275\u0275listener("dateChange",function(r){return e.filterDate(r,"start")}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",6),t.\u0275\u0275element(15,"input",7),t.\u0275\u0275elementStart(16,"nb-datepicker",8,10),t.\u0275\u0275listener("dateChange",function(r){return e.filterDate(r,"end")}),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(18,"chart",11),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",12)(20,"nb-card")(21,"nb-card-body")(22,"p",13),t.\u0275\u0275text(23," Total Number of Claims Between "),t.\u0275\u0275elementStart(24,"b"),t.\u0275\u0275text(25),t.\u0275\u0275pipe(26,"date"),t.\u0275\u0275pipe(27,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(28," For type "),t.\u0275\u0275elementStart(29,"b"),t.\u0275\u0275text(30),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(31," is "),t.\u0275\u0275elementStart(32,"b"),t.\u0275\u0275text(33),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(34,"div",14),t.\u0275\u0275elementEnd()()()()),2&a){const s=t.\u0275\u0275reference(13),r=t.\u0275\u0275reference(17);t.\u0275\u0275advance(7),t.\u0275\u0275property("ngForOf",e.categories),t.\u0275\u0275advance(4),t.\u0275\u0275property("nbDatepicker",s),t.\u0275\u0275advance(4),t.\u0275\u0275property("nbDatepicker",r),t.\u0275\u0275advance(3),t.\u0275\u0275property("data",e.templateAll)("options",e.optionsTrends),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(26,10,e.startDate)," and ",t.\u0275\u0275pipeBind1(27,12,e.endDate),""),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.selectedCategory),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.totalClaims),t.\u0275\u0275advance(1),t.\u0275\u0275property("options",e.optionsClaims)}},directives:[i.Asz,i.yKW,i.rs,p.sg,i.q51,i.h8i,i.$kf,i.B4C,b.ChartComponent,g.w],pipes:[p.uU],styles:[""]}),n})(),S=(()=>{class n{constructor(a,e,s,r){this.dateService=a,this.theme=e,this.trendsService=s,this.graphHeloper=r,this.optionsHospital={}}ngOnInit(){this.min=this.dateService.addDay(this.dateService.today(),-5),this.max=this.dateService.addDay(this.dateService.today(),5);let a=new Date;this.endDate=a.toJSON().split("T")[0];const e=new Date(a);e.setDate(a.getDate()-7),this.startDate=e.toJSON().split("T")[0],this.setSuccessfulToErrorGraph(),this.setHospitalGraph()}setSuccessfulToErrorGraph(){this.trendsService.fetchSuccessErrorClaims(this.startDate,this.endDate).subscribe(a=>{this.apiResponse=a;const e=this.graphHeloper.remodelArray(this.apiResponse.graph[0].claimCount),s=this.graphHeloper.remodelArray(this.apiResponse.graph[1].claimCount),r=this.apiResponse.graph[0].claimCount.map(h=>Object.keys(h)).flat().sort();this.themeSubscriptionS2E=this.theme.getJsTheme().subscribe(h=>{const c=h.variables.chartjs;this.dataS2E={labels:r,datasets:[{data:e,label:"Success",backgroundColor:i.c5R.hexToRgbA("#00FF00",.8)},{data:s,label:"Error",backgroundColor:i.c5R.hexToRgbA("#FF0000",.8)}]},this.optionsS2E={maintainAspectRatio:!1,responsive:!0,legend:{labels:{fontColor:c.textColor}},scales:{xAxes:[{gridLines:{display:!1,color:c.axisLineColor},ticks:{fontColor:c.textColor}}],yAxes:[{gridLines:{display:!0,color:c.axisLineColor},ticks:{fontColor:c.textColor}}]}}})})}setHospitalGraph(){this.themeSubscriptionHospital=this.theme.getJsTheme().subscribe(a=>{const s=a.variables.echarts;this.optionsHospital={backgroundColor:s.bg,color:[a.variables.primaryLight],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0},axisLine:{lineStyle:{color:s.axisLineColor}},axisLabel:{textStyle:{color:s.textColor}}}],yAxis:[{type:"value",axisLine:{lineStyle:{color:s.axisLineColor}},splitLine:{lineStyle:{color:s.splitLineColor}},axisLabel:{textStyle:{color:s.textColor}}}],series:[{name:"Score",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220]}]}})}random(){return Math.round(100*Math.random())}}return n.\u0275fac=function(a){return new(a||n)(t.\u0275\u0275directiveInject(i.uui),t.\u0275\u0275directiveInject(i.WMF),t.\u0275\u0275directiveInject(v),t.\u0275\u0275directiveInject(C))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngx-trend-analysis"]],decls:10,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12"],["type","bar",2,"min-height","300px",3,"data","options"]],template:function(a,e){1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275element(2,"ngx-overall-graph"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",1)(4,"div",2)(5,"nb-card")(6,"nb-card-header"),t.\u0275\u0275text(7,"Successful to Error Claims"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"nb-card-body"),t.\u0275\u0275element(9,"chart",3),t.\u0275\u0275elementEnd()()()()()),2&a&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("data",e.dataS2E)("options",e.optionsS2E))},directives:[R,i.Asz,i.ndF,i.yKW,b.ChartComponent],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@300&family=Source+Sans+Pro:wght@300&display=swap";.header-p[_ngcontent-%COMP%]{font-size:large;font-family:Nunito,sans-serif;font-family:Source Sans Pro,sans-serif}']}),n})();var x=l(42268);const E=[{path:"",component:S},{path:"**",redirectTo:"",pathMatch:"full"}];let T=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.ez,x.Bz.forChild(E),i.zyh,i.IIj,i.OA,b.ChartModule,i.nKr,g.N,i.COg,m.UX]]}),n})()}}]);